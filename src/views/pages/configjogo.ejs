<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuração de Jogos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>

        #trocacor{
            display: none;
        }

        *{ margin:0;
            padding:0;
            box-sizing:border-box;
        }
        body{ display:flex;
            flex-direction:column;
            height:100vh;
        }
        header{ background-color:lightgray;
            padding:20px;
        }
        main{ flex:1;
            display:flex;
            align-items:center;
        }
        footer{ background-color:lightgray;
            padding:20px;
        }
        .login{ display:flex;
            justify-content:center;
            align-items:center;
        }
        .login > .col{
            padding:20px; max-width:60vw; margin:10px;
            border:2px solid lightgray; border-radius:5%;
        }
        .col{ 
            display:flex; 
            flex-direction:column; 
            align-items:center; 
        }

        header, footer{
            flex: 1;
            width: 100%;
        }
        
    </style>
</head>
<input type="checkbox" name="trocacor" id="trocacor" >
<body>



    <%- include("../partials/header") %>

    <main>

        <div class="container">
            <div class="row login">
                <div class="col shadow-lg ">

                    <h1 class="mb-5">Gerenciar informações dos jogos</h1>

                    <% if (mensagem) { %>
                        <div class="alert alert-danger text-center fw-bold">
                            <%= mensagem %>
                        </div>
                    <% } %>

                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalEditJogo">
                        Editar Jogo
                    </button>

                    <form action="/configJogo" method="post" enctype="multipart/form-data">
                        <div class="modal-lg modal fade" id="modalEditJogo" tabindex="-1" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                                <div class="modal-content">
                                    
                                    <div class="modal-header">
                                        <h5 class="modal-title">Selecionar jogo para editar</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                    </div>

                                    <div class="modal-body">

                            
                                        <div class="mb-3">
                                            <label class="form-label">Selecione o jogo:</label>
                                            <select name="idJogo" class="form-select" required>
                                                <option value="">Escolha um jogo...</option>

                                                <% jogos.forEach(jogo => { %>
                                                    <option value="<%= jogo.id %>">
                                                        <%= jogo.titulo %>
                                                    </option>
                                                <% }) %>

                                            </select>
                                        </div>

                                        <hr>

                                        
                                        <div class="mb-3">
                                            <label class="form-label">Novo nome:</label>
                                            <input type="text" class="form-control" name="newNome">
                                        </div>

                                        
                                        <div class="mb-3">
                                            <label class="form-label">Nova categoria:</label>
                                            <input type="text" class="form-control" name="newCategoria">
                                        </div>

                                        
                                        <div class="mb-3">
                                            <label class="form-label">Novo preço:</label>
                                            <input type="number" step="0.01" class="form-control" name="newPreco">
                                        </div>

                                        
                                        <div class="mb-3">
                                            <label class="form-label">Nova descrição:</label>
                                            <textarea class="form-control" name="newDescricao" rows="3"></textarea>
                                        </div>

                                        <div class="mb-3 row">
                                            <label for="inputcriador" class="col-sm-2 col-form-label">
                                                <select class="form-select" aria-label="default select example" name="newpublisher">
                                                    <option value="Independente">Independente</option>
                                                    <option value="Estúdio">Estúdio</option>
                                                </select>
                                            </label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control" id="inputcriador" placeholder="Bethesda, Riot Games..." name="newdeveloper" required>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="formFile" class="form-label">Coloque uma nova foto do seu jogo:</label>
                                            <input class="form-control" type="file" id="formFile" name="imagem" accept="image/*" required>
                                        </div>

                                    </div>

                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                                        <button type="submit" class="btn btn-primary" name="acao" value="atualizar">Salvar alterações</button>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </form>
                    <form action="/configJogo" method="post">
                        <div style="margin-top:20px; text-align:center;">
                            <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#modalExcluirJogo">
                                Excluir jogo
                            </button>
                        </div>

                        
                        <div class="modal fade" id="modalExcluirJogo" tabindex="-1">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">

                                    <div class="modal-header">
                                        <h5 class="modal-title">Excluir jogo</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                    </div>

                                    <div class="modal-body">
                                        <label class="form-label">Selecione o jogo para excluir:</label>
                                        <select class="form-select" name="idJogoExcluir" required>
                                            <option value="">Escolha um jogo...</option>

                                            <% jogos.forEach(jogo => { %>
                                                <option value="<%= jogo.id %>"><%= jogo.titulo %></option>
                                            <% }) %>

                                        </select>

                                        <p class="mt-3 text-danger fw-bold">
                                            Tem certeza que deseja excluir este jogo? Esta ação é irreversível.
                                        </p>
                                    </div>

                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                        <button type="submit" class="btn btn-danger" name="acao" value="excluir">Excluir</button>
                                    </div>

                                </div>
                            </div>
                        </div>

                    </form>

                </div>
            </div>
        </div>

    </main>

    <footer>
        <%- include("../partials/footer") %>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
